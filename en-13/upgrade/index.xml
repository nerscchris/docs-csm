<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Upgrade on Cray System Management (CSM)</title>
    <link>/docs-csm/en-13/upgrade/</link>
    <description>Recent content in Upgrade on Cray System Management (CSM)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Tue, 16 Aug 2022 03:34:32 +0000</lastBuildDate><atom:link href="/docs-csm/en-13/upgrade/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>1.2.0 Or Later To 1.3.0 Upgrade Process</title>
      <link>/docs-csm/en-13/upgrade/upgrade_ncn_nodes/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:35 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/upgrade_ncn_nodes/</guid>
      <description>CSM 1.2.0 or later to 1.3.0 Upgrade Process Introduction This document guides an administrator through the upgrade of Cray Systems Management from v1.0 to v1.2. When upgrading a system, follow this top-level file from top to bottom. The content on this top-level page is meant to be terse. For additional reference material on the upgrade processes and scripts mentioned explicitly on this page, see resource material.
Important Notes Service request adjustments are needed for small systems   For systems with only three worker nodes (typically Testing and Development Systems (TDS)), prior to proceeding with this upgrade, CPU limits MUST be lowered on several services in order for this upgrade to succeed.</description>
    </item>
    
    <item>
      <title>Upgrade Automation</title>
      <link>/docs-csm/en-13/upgrade/scripts/upgrade/upgrade_automation/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:35 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/scripts/upgrade/upgrade_automation/</guid>
      <description>Upgrade Automation This document describes how the CSM upgrade process is automated.
Overview In a nutshell, an upgrade is:
 Upload new artifacts into a running system. Rebuild each NCN with the newly uploaded images. Deploy new charts after all NCNs are upgraded.  Prerequisites Everything that is needed before upgrading an NCN.
 NOTE:
The prerequisites.sh script is required to run on both ncn-m001 and ncn-m002 (at different points in the upgrade process).</description>
    </item>
    
    <item>
      <title>SLS Updater.py TechNICal Details</title>
      <link>/docs-csm/en-13/upgrade/scripts/sls/sls_updater.py_technical_details/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:34 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/scripts/sls/sls_updater.py_technical_details/</guid>
      <description>sls_updater.py Technical Details No action needed. Informational purposes only.
Actions and order This migration is performed offline for data security. The running SLS file is first dumped, then the migration script is run and a new, migrated output file is created.
 Migrate switch naming (in order): leaf to leaf-bmc, and agg to leaf. Remove api-gateway entries from HMLB subnets for CSM 1.2 security. Remove kubeapi-vip reservations for all networks except NMN.</description>
    </item>
    
    <item>
      <title>SLS Updates Expert Mode</title>
      <link>/docs-csm/en-13/upgrade/scripts/sls/expert_mode/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:34 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/scripts/sls/expert_mode/</guid>
      <description>SLS Updates Expert mode The 1.2 SLS Upgrader aims to make the upgrade of SLS from pre-CMS 1.2 to CSM 1.2 as seamless as possible. However, certain system constraints and subnet sizes quickly necessitate overriding standard input.
 Key takeaways When to use expert mode Minimal input review Forcing preservation of some existing values Expert mode: Overriding defaults and forced guiding of upgrades  Expert mode: Prerequisites Expert mode: Process Expert mode: Example    Key takeaways  Expert mode requires both an iterative (offline) process and command line override values.</description>
    </item>
    
    <item>
      <title>Upgrade SLS Offline From 1.0.x To Csm 1.2</title>
      <link>/docs-csm/en-13/upgrade/scripts/sls/readme.sls_upgrade/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:33 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/scripts/sls/readme.sls_upgrade/</guid>
      <description>Upgrade SLS Offline from CSM 1.0.x to CSM 1.2 Abstract Prior to updating SLS, at a minimum, answers to the following questions must be known:
  Will user traffic (non-administrative) come in via the CAN or CHN, or is the site air-gapped?
By default when upgrading to CSM 1.2, non-administrative user traffic is migrated from the CAN to the CHN while minimizing changes. If instead it is desired that the non-administrative user traffic continue to come in via the CAN, or if the site is air-gapped, then this must be explicitly specified during the SLS update.</description>
    </item>
    
    <item>
      <title>Prepare For Upgrade</title>
      <link>/docs-csm/en-13/upgrade/prepare_for_upgrade/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:32 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/prepare_for_upgrade/</guid>
      <description>Prepare for Upgrade Before beginning an upgrade to a new version of CSM, there are a few things to do on the system first.
  Understand that management service resiliency is reduced during the upgrade.
Warning: Although it is expected that compute nodes and application nodes will continue to provide their services without interruption, it is important to be aware that the degree of management services resiliency is reduced during the upgrade.</description>
    </item>
    
    <item>
      <title>Stage 3 - Service Upgrades</title>
      <link>/docs-csm/en-13/upgrade/stage_3/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:32 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_3/</guid>
      <description>Stage 3 - CSM Service Upgrades Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
Move assets to ncn-m002   Set the CSM_RELEASE variable to the target CSM version of this upgrade.
CSM_RELEASE=1.3.0 CSM_REL_NAME=csm-${CSM_RELEASE}   Move the RBD device containing the CSM tarball.
/usr/share/doc/csm/scripts/csm_rbd_tool/csm_rbd_tool.py --rbd_action move --target_host ncn-m002   Perform upgrade During this stage there will be a brief (approximately five minutes) window where pods with Persistent Volumes (PVs) will not be able to migrate between nodes.</description>
    </item>
    
    <item>
      <title>Stage 4 - Ceph Upgrade</title>
      <link>/docs-csm/en-13/upgrade/stage_4/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:32 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_4/</guid>
      <description>Stage 4 - Ceph Upgrade Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, then see Relevant troubleshooting links for upgrade-related issues.
Ceph upgrade contents The upgrade includes all fixes from v15.2.15 through v16.2.9. See the Ceph version index for details.
Procedure  This upgrade is performed using the cubs_tool. The cubs_tool.py can be found on ncn-s00[1-3] in /srv/cray/script/common/ Unless otherwise noted, all ceph commands that may need to be used in this stage may be run on any master node or any of the first three storage nodes (ncn-s001, ncn-s002, or ncn-s003).</description>
    </item>
    
    <item>
      <title>Stage 5 - Perform NCN Personalization</title>
      <link>/docs-csm/en-13/upgrade/stage_5/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:32 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_5/</guid>
      <description>Stage 5 - Perform NCN Personalization Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
Procedure   If custom configuration content was merged with content from a previous CSM installation, then merge the new CSM configuration in with it in the csm-config-management Git repository. This is not necessary if the NCN personalization configuration was using a commit on a cray/csm/VERSION branch (that is, using the default configuration).</description>
    </item>
    
    <item>
      <title>Stage 0 - Prerequisites And Preflight Checks</title>
      <link>/docs-csm/en-13/upgrade/stage_0_prerequisites/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:31 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_0_prerequisites/</guid>
      <description>Stage 0 - Prerequisites and Preflight Checks  Reminders:
 CSM 1.2.0 or higher is required in order to upgrade to CSM 1.3.0. If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.   Stage 0 has several critical procedures which prepare the environment and verify if the environment is ready for the upgrade.
 Stage 0 - Prerequisites and Preflight Checks  Stage 0.</description>
    </item>
    
    <item>
      <title>Stage 1 - Ceph Image Upgrade</title>
      <link>/docs-csm/en-13/upgrade/stage_1/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:31 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_1/</guid>
      <description>Stage 1 - Ceph image upgrade Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
Before starting Stage 1, access the Argo UI to view the progress of this stage. For more information, see Using the Argo UI.
Procedure   (ncn-m001#) Run ncn-upgrade-worker-storage-nodes.sh for all storage nodes to be upgraded. Provide the storage nodes in a comma-separated list, such as ncn-s001,ncn-s002,ncn-s003.</description>
    </item>
    
    <item>
      <title>Stage 2 - Kubernetes Upgrade</title>
      <link>/docs-csm/en-13/upgrade/stage_2/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:31 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/stage_2/</guid>
      <description>Stage 2 - Kubernetes Upgrade Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
Stage 2.1   (ncn-m001#) Run ncn-upgrade-master-nodes.sh for ncn-m002.
Follow output of the script carefully. The script will pause for manual interaction.
/usr/share/doc/csm/upgrade/scripts/upgrade/ncn-upgrade-master-nodes.sh ncn-m002  NOTE The root user password for the node may need to be reset after it is rebooted.</description>
    </item>
    
    <item>
      <title>Upgrade</title>
      <link>/docs-csm/en-13/upgrade/readme/</link>
      <pubDate>Tue, 16 Aug 2022 03:34:31 +0000</pubDate>
      
      <guid>/docs-csm/en-13/upgrade/readme/</guid>
      <description>Upgrade CSM The process for upgrading Cray Systems Management (CSM) has many steps in multiple procedures which should be done in a specific order.
After the upgrade of CSM software, the CSM health checks will validate the system before doing any other operational tasks like the check and update of firmware on system components. Once the CSM upgrade has completed, other product streams for the HPE Cray EX system can be installed or upgraded.</description>
    </item>
    
  </channel>
</rss>
